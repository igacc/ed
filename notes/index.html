<html>
<head>
<meta charset='utf-8' />
<meta http-equiv="Content-Security-Policy" content="default-src 'unsafe-inline' 'unsafe-eval' 'self' *.iga.cc *.ctt.li *.163.com localhost *.cnzz.com">
<meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<script src="bb64.js"></script>
<script src="bbdata.js"></script>
<title></title>
<style type="text/css">
body{background-color:rgb(12,16,33);color:rgb(246,246,248);line-height:150%;}
h1 {text-align:center}
h2 {font-weight:normal}
h3 {font-weight:normal}
td {text-align:center}
a {color:rgb(246,246,248)}
</style>
</head>
<body>
<div>
<h2></h2>
<!--正文-->
<p></p>
<!--生成器-->
<p style="display:none">
字典 <input size='64' type='text' value='' /><br />
标题 <input size='64' type='text' value='' /><br />
内容 <textarea rows='5' cols='64'></textarea><br />
输出 <textarea rows='5' cols='64'></textarea><br />
<button onclick='generate();'>生成</button><br />
免密 <a href=''></a><br />
安全 <a href=''></a>
</p>
<!--浏览器解密-->
<p style="display:none">
<input size='64' type='password' value='' /><br />
<button onclick='degenerate();'>解密</button><br />
</p>
<!--404-->
<p style="display:none">
当前页面参数有误，请在网址#后输入正确的标题，然后输入字典解密，或者使用
<a href='#gen'>生成器</a>。<br />
</p>
</div>
<script type="text/javascript">
var title;
reloadx();
function reloadx(){
    hash=window.location.hash.substr(1);
    document.getElementsByTagName("p")[1].style.display="none";
    document.getElementsByTagName("p")[2].style.display="none";
    document.getElementsByTagName("p")[3].style.display="none";
    //生成加密
    if (hash=="gen"){
    title="生成器";
    document.getElementsByTagName("p")[1].style.display="inline";
    document.getElementsByTagName("input")[0].value=getdict();
    }
    //浏览器中解密
    else if (bbase[String(hash)]!=undefined) {
    title=hash;
    document.getElementsByTagName("p")[2].style.display="inline";
    
    }
    else
    {
    dict=hash.substr(0,64).split("");
    title=hash.substr(64);
    //404
    if (bbase[title]==undefined){
        title="404";
        document.getElementsByTagName("p")[3].style.display="inline";
    }
    //URL解密
    else{
        document.getElementsByTagName("p")[0].innerHTML=(Base64.decode(bbase[title],dict));
    }
    }
    document.title=title;
    document.getElementsByTagName("h2")[0].innerHTML=title;
    
}
window.onhashchange=function(){  
    reloadx();
};
function getdict(){
    var i,j,k,jk;
    var bdc="ABIDEFGHCJKLMNOPQujTUVWXYZabcdefghiSklmnopqrstRvwxyz0123456789+/".split("");
    for (i=0;i<666;i++){
    j=Math.floor(Math.random()*(bdc.length-0)+0);
    k=Math.floor(Math.random()*(bdc.length-0)+0);
    jk=bdc[j];
    bdc[j]=bdc[k];
    bdc[k]=jk;
    }
    return bdc.join("");
}
function generate(){
    var txsr=document.getElementsByTagName("textarea")[0].value;
    txsr=txsr.replace(/\n/g,"<br />");
    var dct=document.getElementsByTagName("input")[0].value.split("");
    var hsh="#"+document.getElementsByTagName("input")[0].value+document.getElementsByTagName("input")[1].value;
    var hsh0="#"+document.getElementsByTagName("input")[1].value;
    document.getElementsByTagName("textarea")[1].innerHTML='"'+document.getElementsByTagName("input")[1].value+'":"'+Base64.encode(txsr,dct)+'",\n';
    document.getElementsByTagName("a")[0].innerHTML=hsh;
    document.getElementsByTagName("a")[0].href=hsh;
    document.getElementsByTagName("a")[1].innerHTML=hsh0;
    document.getElementsByTagName("a")[1].href=hsh0;
}
function degenerate(){
    var dict=document.getElementsByTagName("input")[2].value.split("");
    document.getElementsByTagName("p")[0].innerHTML=(Base64.decode(bbase[title],dict))
    document.getElementsByTagName("p")[2].style.display="none";
    
}
</script>
</div>
<div>
</div>
<p style="text-align:center">&copy;2017</p>
<div style="display:none"><script src="https://s11.cnzz.com/z_stat.php?id=1255344758&web_id=1255344758" language="JavaScript"></script></div>
</body>
</html>
