<html>
<head>
<meta charset='utf-8' />
<meta http-equiv="Content-Security-Policy" content="default-src 'unsafe-inline' 'unsafe-eval' 'self' *.iga.cc *.ctt.li *.163.com localhost *.cnzz.com">
<meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<script src="aes_2.js"></script>
<script src="bbdata.js"></script>
<title></title>
<style type="text/css">
body{background-color:rgb(12,16,33);color:rgb(246,246,248);line-height:150%;}
h1 {text-align:center}
h2 {font-weight:normal}
h3 {font-weight:normal}
td {text-align:center}
a {color:rgb(246,246,248)}
</style>
</head>
<body>
<div>
<h2></h2>
<!--正文-->
<p></p>
<!--生成器-->
<p style="display:none">
密码 <input size='20' type='text' value='' /><br />
标题 <input size='20' type='text' value='' /><br />
内容 <textarea rows='5' cols='50'></textarea><br />
输出 <textarea rows='5' cols='50'></textarea><br />
<button onclick='generate();'>生成</button><br />
免密 <a href=''></a><br />
安全 <a href=''></a><br />
编辑 <a href='https://github.com/igacc/igacc.github.io/edit/master/bbdata.js'>GITHUB</a>
</p>
<!--浏览器解密-->
<p style="display:none">
<input size='20' type='password' value='' /><br />
<button onclick='degenerate();'>解密</button><br />
</p>
<!--404-->
<p style="display:none">
欢迎访问IgA.cc，更多信息请关注公众号igacc。<br />请在网址<b>#</b>后输入正确的标题，然后输入密码查看。或者使用
<a href='#gen'>生成器</a>。<br />
</p>
</div>
<script type="text/javascript">
var title,soy="";
reloadx();
function reloadx(){
    hash=decodeURI(window.location.hash.substr(1));
    document.getElementsByTagName("p")[0].style.display="none";
    document.getElementsByTagName("p")[1].style.display="none";
    document.getElementsByTagName("p")[2].style.display="none";
    document.getElementsByTagName("p")[3].style.display="none";
    //生成加密
    if (hash=="gen"){
    title="生成器";
    document.getElementsByTagName("p")[1].style.display="inline";
    document.getElementsByTagName("input")[0].value=getpass();
    }
    //浏览器中解密
    else if (bbase[String(hash)]!=undefined) {
    //console.log(bbase[String(hash)]);
    title=hash;
    document.getElementsByTagName("p")[2].style.display="inline";
    }
    else
    {
    title=hash.split("&")[0];
    pwd=hash.split("&")[1];
    //404
    if (bbase[title]==undefined){
        console.log("err key",title);
        title="IgA.cc";
        var tk=document.getElementsByTagName("p")[3].innerHTML;
        if (soy==""){
        soy="<p><b>索引</b></p><ul>";
        for (var jk in bbase){
            //console.log(jk);
            soy=soy+"<li><a href='#"+jk+"'>#"+jk+"</a></li>";
        }
        soy=soy+"</ul>"
        tk=tk+soy;
        }
        document.getElementsByTagName("p")[3].innerHTML=tk;
        document.getElementsByTagName("p")[3].style.display="inline";
    }
    //URL解密
    else{
        document.getElementsByTagName("p")[0].innerHTML=Decrypt(bbase[title],pwd);
        document.getElementsByTagName("p")[0].style.display="inline";
    }
    }
    document.title=title;
    document.getElementsByTagName("h2")[0].innerHTML=title;
    
}
window.onhashchange=function(){  
    reloadx();
};
function getpass(){
    var i,j,k,jk="";
    var bdc="abcdefghijklmnopqrstuvwxyz".split("");
    for (i=0;i<4;i++){
        j=Math.floor(Math.random()*(bdc.length-0)+0);
        jk=jk+bdc[j];
    }
    return jk;
}
function generate(){
    var xcontent=document.getElementsByTagName("textarea")[0].value;
    xcontent=xcontent.replace(/\n/g,"<br />");
    var xpwd=document.getElementsByTagName("input")[0].value;
    //var hsh="#"+document.getElementsByTagName("input")[0].value+document.getElementsByTagName("input")[1].value;
    var hsh="#"+document.getElementsByTagName("input")[1].value+"&"+document.getElementsByTagName("input")[0].value;
    var hsh0="#"+document.getElementsByTagName("input")[1].value;
    //console.log("ok");
    //console.log(Encrypt(xcontent,xpwd));
    //console.log('"'+document.getElementsByTagName("input")[1].value+'":"'+Encrypt(xcontent,xpwd)+'",\n');
    document.getElementsByTagName("textarea")[1].value='"'+document.getElementsByTagName("input")[1].value+'":"'+Encrypt(xcontent,xpwd)+'",\n';
    document.getElementsByTagName("a")[0].innerHTML=hsh;
    document.getElementsByTagName("a")[0].href=hsh;
    document.getElementsByTagName("a")[1].innerHTML=hsh0;
    document.getElementsByTagName("a")[1].href=hsh0;
}
function degenerate(){
    var pwd=document.getElementsByTagName("input")[2].value;
    document.getElementsByTagName("p")[0].innerHTML=(Decrypt(bbase[title],pwd))
    document.getElementsByTagName("p")[2].style.display="none";
    document.getElementsByTagName("p")[0].style.display="inline";
    
}
function Encrypt(word,pwd){
return CryptoJS.AES.encrypt(word,pwd).toString();
}
function Decrypt(word,pwd){
return CryptoJS.AES.decrypt(word,pwd).toString(CryptoJS.enc.Utf8);
}
</script>
</div>
<div>
</div>
<p style="text-align:center">&copy;2017</p>
<div style="display:none"><script src="https://s11.cnzz.com/z_stat.php?id=1255344758&web_id=1255344758" language="JavaScript"></script></div>
</body>
</html>
